<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestionnaire de Mots de Passe</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Barre supérieure avec le titre et le bouton déconnexion -->
    <div class="topbar">
        Gestionnaire de Mots de Passe
        <button id="logout-btn" class="logout-btn" style="display:none;" onclick="logout()">Déconnexion</button>
    </div>

    <!-- Page d'accueil : choix connexion ou création de compte -->
    <div id="auth-choice" class="card" style="display:block;">
        <h2>Bienvenue</h2>
        <img src="images/HoneyPot.png" alt="Logo" class="logo-img" style="display:block;margin-left:auto;margin-right:auto;">
        <button onclick="showSignup()">Créer un compte</button>
        <button onclick="showLogin()">Se connecter</button>
    </div>

    <!-- Formulaire de création de compte -->
    <div id="setup-container" class="card" style="display: none;">
        <h2>Créer un compte</h2>
        <input type="text" id="new-username" placeholder="Identifiant">
        <input type="password" id="new-master-password" placeholder="Nouveau mot de passe " oninput="updatePasswordHint()">
        <div id="password-hint" style="font-size:0.98em;display:none;margin-bottom:10px;text-align:left;"></div>
        <button onclick="setMasterPassword()">Enregistrer</button>
        <div style="margin-top:10px;text-align:center;">
            <a href="#" onclick="showLogin();return false;" style="color:#3b82f6;text-decoration:underline;font-size:0.98em;">Déjà un compte ? Se connecter</a>
        </div>
    </div>

    <!-- Formulaire de connexion -->
    <div id="auth-container" class="card">
        <h2>Connexion</h2>
        <input type="text" id="login-username" placeholder="Identifiant">
        <input type="password" id="master-password" placeholder="Mot de passe ">
        <button onclick="authenticate()">Se connecter</button>
        <div style="margin-top:10px;text-align:center;">
            <a href="#" onclick="showSignup();return false;" style="color:#3b82f6;text-decoration:underline;font-size:0.98em;">Créer un compte</a>
        </div>
    </div>

    <!-- Gestionnaire de mots de passe (après connexion) -->
    <div id="app" class="card">
        <h2 style="margin-top:0;">Vos mots de passe</h2>
        <!-- Champs de saisie empilés -->
        <input type="text" id="account-username" placeholder="Identifiant du compte">
        <div style="position:relative;">
            <input type="text" id="site-link" placeholder="Lien du site (ex: https://example.com)" autocomplete="off" oninput="showSiteSuggestions()" onblur="hideSiteSuggestionsWithDelay()">
            <div id="site-link-list"></div>
        </div>
        <input type="password" id="password" placeholder="Mot de passe">
        <!-- Boutons d'action alignés horizontalement -->
        <div class="actions-row">
            <button class="action-btn" onclick="generatePassword()">Générer un mot de passe</button>
            <button class="action-btn" onclick="addPassword()">Ajouter</button>
            <button class="action-btn" style="background:#ef4444;" onclick="deleteAllPasswords()">Supprimer tous les mots de passe</button>
        </div>
        <div id="add-error" style="color:#ef4444;font-size:0.98em;display:none;margin-top:8px;"></div>
        <!-- Tableau des mots de passe -->
        <div id="password-list" style="margin-top:8px;"></div>
    </div>

    <script src="app.js"></script>
</body>
</html>
